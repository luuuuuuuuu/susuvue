(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6206"],{"14Xm":function(e,t,i){e.exports=i("ls82")},"3ADX":function(e,t,i){"use strict";var n=i("14Xm"),a=i.n(n),s=i("4d7F"),r=i.n(s),o=i("D3Ub"),l=i.n(o),c=i("t3Un");function u(e,t){return Object(c.a)({url:e,method:"get",params:t})}t.a={data:function(){return{loading:!0,data:[],page:0,size:10,total:0,url:"",params:{},query:{},time:10,isAdd:!1}},methods:{init:function(){var e=this;return l()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.beforeInit();case 2:if(t.sent){t.next=4;break}return t.abrupt("return");case 4:return t.abrupt("return",new r.a(function(t,i){e.loading=!0,u(e.url,e.params).then(function(i){0===i.status?(e.total=i.obj.total,e.data=i.obj.list):(e.total=i.totalElements,e.data=i.content),setTimeout(function(){e.loading=!1},e.time),console.log("initData"),t(i)}).catch(function(t){e.loading=!1,i(t)})}));case 5:case"end":return t.stop()}},t,e)}))()},beforeInit:function(){return!0},pageChange:function(e){this.page=e-1,this.init()},sizeChange:function(e){this.page=0,this.size=e,this.init()},dleChangePage:function(e){void 0===e&&(e=1),this.data.length===e&&0!==this.page&&(this.page=this.page-1)},toQuery:function(){this.page=0,this.init()}}}},"41Be":function(e,t,i){"use strict";i.d(t,"a",function(){return a});var n=i("Q2AE");function a(e){if(e&&e instanceof Array&&e.length>0){var t=e;return!!(n.a.getters&&n.a.getters.roles).some(function(e){return t.includes(e)})}return console.error("need roles! Like v-permission=\"['admin','editor']\""),!1}},D3Ub:function(e,t,i){"use strict";t.__esModule=!0;var n=function(e){return e&&e.__esModule?e:{default:e}}(i("4d7F"));t.default=function(e){return function(){var t=e.apply(this,arguments);return new n.default(function(e,i){return function a(s,r){try{var o=t[s](r),l=o.value}catch(e){return void i(e)}if(!o.done)return n.default.resolve(l).then(function(e){a("next",e)},function(e){a("throw",e)});e(l)}("next")})}}},FjNi:function(e,t,i){"use strict";var n=i("cIx3");i.n(n).a},cIx3:function(e,t,i){},yau5:function(e,t,i){"use strict";i.r(t);var n=i("41Be"),a=i("3ADX"),s=i("hmh/"),r=i("bp2V"),o={components:{MyVideoPlayer:i("DILE").default,eForm:r.default},mixins:[a.a],data:function(){return{tipVisibles:[],delLoading:!1,btnIndex:0,height:document.documentElement.clientHeight-180+"px;",isAdd:!1,downloadLoading:!1,queryShenFenOptions:[{key:"1",display_name:"所有身份"},{key:"2",display_name:"精英-已通过"},{key:"3",display_name:"颜值-已通过"},{key:"4",display_name:"颜值-未通过(永久)"},{key:"5",display_name:"颜值-未通过(待重审)"},{key:"6",display_name:"颜值-认证中"},{key:"7",display_name:"精英-认证中"}],queryStatusOptions:[{key:"-1",display_name:"所有"},{key:"0",display_name:"正常"},{key:"1",display_name:"沉底"},{key:"2",display_name:"封禁"},{key:"3",display_name:"推荐"}],querySexOptions:[{key:"1",display_name:"男"},{key:"2",display_name:"女"}],queryRegTypeOptions:[{key:"0",display_name:"所有"},{key:"-1",display_name:"注册充值"},{key:"-2",display_name:"邀请免充"}],radioShenFenList_man:[{key:3,text:"帅哥(未上传)"},{key:13,text:"帅哥-认证中"},{key:113,text:"帅哥-已通过"},{key:-33,text:"帅哥-未通过(永久)"},{key:-3,text:"帅哥-未通过(重审)"},{key:-100,text:"没有身份"}],radioShenFenList_woman:[{key:2,text:"美女(未上传)"},{key:12,text:"美女-认证中"},{key:112,text:"美女-已通过"},{key:-22,text:"美女-未通过(永久)"},{key:-2,text:"美女-未通过(重审)"},{key:-100,text:"没有身份"}]}},watch:{loading:function(e,t){!this.loading&&this.data&&this.showIpDesc()}},created:function(){var e=this;this.$nextTick(function(){e.init()})},mounted:function(){var e=this;window.onresize=function(){e.height=document.documentElement.clientHeight-180+"px;"}},methods:{showIpDesc:function(){var e=this;this.data.forEach(function(t){var i=t.creatorUsername;i&&Object(s.d)(i).then(function(i){var n=i.split(" ")[2],a=JSON.parse(n).data;e.$set(t,"_async_label",a)}).catch(function(){e.$set(t,"_async_label","-")})})},checkPermission:n.a,beforeInit:function(){this.url="http://www.miaomiao888.com/susu/backstage/layui/api/user/list";var e=this.query,t=e.shenFen,i=e.status,n=e.keyWords,a=e.sex,s=e.regType;return this.params={pageNum:this.page+1,pageSize:this.size,sortField:"id",order:"desc",deptId:this.deptId},n&&(this.params.searchName=n),t&&(this.params.type=t),i&&(this.params.status=i),a&&(this.params.sex=a),s&&(this.params.registType=s),!0},subUpdateYanzhi:function(e){var t=this;this.delLoading=!0;var i=e.id,n=e.identityType;Object(s.g)(i,n).then(function(i){if(t.delLoading=!1,t.$refs["p-"+e.id].doClose(),0===i.status){var a=null;t.radioShenFenList_man.forEach(function(e){e.key===n&&(a=e.text)}),a||t.radioShenFenList_woman.forEach(function(e){e.key===n&&(a=e.text)}),t.$refs["newValue-"+e.id].innerHTML=a,t.$notify({title:"操作成功",type:"success",duration:1500})}else t.$notify({title:"操作失败",type:"error",duration:1500})}).catch(function(i){t.$refs["p-"+e.id].doClose(),t.$message.error(i.message)})},subUpdateStatus:function(e,t,i,n){var a=this;this.btnIndex=i,Object(s.f)(e,t).then(function(e){a.btnIndex=0,0===e.status?(a.$set(a.data[n],"workStatus",t),a.$notify({title:"操作成功",type:"success",duration:1500})):a.$message.error(e.msg)}).catch(function(t){a.btnIndex=0,a.$refs[e].doClose(),console.log(t.message)})},subDelete:function(e){var t=this;this.delLoading=!0,Object(s.b)(e).then(function(i){t.delLoading=!1,t.$refs[e].doClose(),t.dleChangePage(),t.init(),t.$notify({title:"删除成功",type:"success",duration:2500})}).catch(function(i){t.delLoading=!1,t.$refs[e].doClose(),console.log(i.message)})},add:function(){this.isAdd=!0,this.$refs.form.form={},this.$refs.form.dialog=!0},edit:function(e){this.isAdd=!1;var t=this.$refs.form,i=[],n=e.coverList;n.length>0&&n.forEach(function(e,t,n){if(-1!==e.indexOf("_")){var a=e.split("_"),s={};s.videoUrl=a[1],s.coverUrl=a[2],s.originalStr=e,i.push(s)}else{var r={videoUrl:""};r.coverUrl=e,r.originalStr=e,i.push(r)}}),t.form={id:e.id,nickname:e.nickname,phone:e.phone,sex:e.sex,headPicture:e.headPicture,photos:i,authinfo:e.authinfo,birthday:e.birthday,introduction:e.introduction,profession:e.profession,diamond:e.diamond,vipType:e.vipType,identityType:e.identityType,photoAlbum:e.photoAlbum},t.yanzhiList_man=this.radioShenFenList_man,t.yanzhiList_woman=this.radioShenFenList_woman,t.dialog=!0}}},l=(i("FjNi"),i("KHd+")),c=Object(l.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("eForm",{ref:"form",attrs:{"is-add":e.isAdd}}),e._v(" "),i("div",{staticClass:"head-container"},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"用户名/手机号/极光号"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.toQuery(t):null}},model:{value:e.query.keyWords,callback:function(t){e.$set(e.query,"keyWords",t)},expression:"query.keyWords"}}),e._v(" "),i("el-select",{staticClass:"filter-item",staticStyle:{width:"160px"},attrs:{clearable:"",placeholder:"身份"},model:{value:e.query.shenFen,callback:function(t){e.$set(e.query,"shenFen",t)},expression:"query.shenFen"}},e._l(e.queryShenFenOptions,function(e){return i("el-option",{key:e.key,attrs:{label:e.display_name,value:e.key}})})),e._v(" "),i("el-select",{staticClass:"filter-item",staticStyle:{width:"75px"},attrs:{clearable:"",placeholder:"状态"},model:{value:e.query.status,callback:function(t){e.$set(e.query,"status",t)},expression:"query.status"}},e._l(e.queryStatusOptions,function(e){return i("el-option",{key:e.key,attrs:{label:e.display_name,value:e.key}})})),e._v(" "),i("el-select",{staticClass:"filter-item",staticStyle:{width:"75px"},attrs:{clearable:"",placeholder:"性别"},on:{change:e.toQuery},model:{value:e.query.sex,callback:function(t){e.$set(e.query,"sex",t)},expression:"query.sex"}},e._l(e.querySexOptions,function(e){return i("el-option",{key:e.key,attrs:{label:e.display_name,value:e.key}})})),e._v(" "),i("el-select",{staticClass:"filter-item",staticStyle:{width:"105px"},attrs:{clearable:"",placeholder:"注册类型"},on:{change:e.toQuery},model:{value:e.query.regType,callback:function(t){e.$set(e.query,"regType",t)},expression:"query.regType"}},e._l(e.queryRegTypeOptions,function(e){return i("el-option",{key:e.key,attrs:{label:e.display_name,value:e.key}})})),e._v(" "),i("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:e.toQuery}},[e._v("搜索")]),e._v(" "),i("div",{directives:[{name:"permission",rawName:"v-permission",value:["ADMIN","USER_ALL","USER_CREATE"],expression:"['ADMIN','USER_ALL','USER_CREATE']"}],staticStyle:{display:"inline-block",margin:"0px 2px"}},[i("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:e.add}},[e._v("新增")])],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.data,border:"",size:"small"}},[i("el-table-column",{attrs:{prop:"id",label:"uid","min-width":"40",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"code",label:"极光号","min-width":"50",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"nickname",label:"用户名","min-width":"90",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"phone",label:"电话","min-width":"40",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"sex",label:"性别","min-width":"30",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.sex?i("div",[e._v("男")]):2==t.row.sex?i("div",[e._v("女")]):i("div",[e._v("无")])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"headPicture",label:"头像","min-width":"70",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("viewer",{ref:"viewer",staticClass:"viewer"},[t.row.headPicture?i("img",{staticClass:"user-avatar",attrs:{src:t.row.headPicture+e.$store.state.settings.img_resize,"data-source":t.row.headPicture,alt:"头像",title:"点击查看大图"}}):e._e()])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"headPicture",label:"相册",width:"250","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.userPhotoVideoJson?i("div",[e._l(t.row.userPhotoVideoJson.videoArr,function(e,t){return i("div",{key:t},[i("my-video-player",{attrs:{"video-url":e.videoUrl,state:!1}})],1)}),e._v(" "),i("viewer",{ref:"viewer",staticClass:"viewer",attrs:{images:t.row.userPhotoVideoJson.imageArr}},e._l(t.row.userPhotoVideoJson.imageArr,function(t){return i("img",{key:t,staticClass:"user-photo",attrs:{src:t+e.$store.state.settings.img_resize,"data-source":t,alt:" ",title:"点击查看大图"}})}))],2):i("div",[e._v("无")])]}}])}),e._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!1,prop:"authinfo",label:"颜值","min-width":"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("viewer",{ref:"viewer",staticClass:"viewer",attrs:{images:t.row.userPhotoVideoJson.imageArr}},[t.row.authinfo?i("img",{staticClass:"user-avatar",attrs:{src:t.row.authinfo+e.$store.state.settings.img_resize,"data-source":t.row.authinfo,alt:"",title:"点击查看大图"}}):i("span",[e._v("无")])]),e._v(" "),i("div"),e._v(" "),i("el-popover",{directives:[{name:"permission",rawName:"v-permission",value:["ADMIN","USER_ALL","USER_DELETE"],expression:"['ADMIN','USER_ALL','USER_DELETE']"}],ref:"p-"+t.row.id,attrs:{disabled:-100==t.row.identityType,placement:"bottom",width:"170"}},[i("div",{staticStyle:{"text-align":"left",margin:"0"}},[i("p",[e._v("选择颜值认证")]),e._v(" "),i("el-radio-group",{model:{value:t.row.identityType,callback:function(i){e.$set(t.row,"identityType",i)},expression:"scope.row.identityType"}},e._l(1==t.row.sex?e.radioShenFenList_man:e.radioShenFenList_woman,function(t){return i("el-radio",{key:t.key,staticStyle:{"margin-left":"0px"},attrs:{label:t.key,text:t.text,trigger:"click"}},[e._v("\n                "+e._s(t.text)+"\n              ")])})),e._v(" "),i("el-button",{attrs:{loading:e.delLoading,type:"primary",size:"mini"},on:{click:function(i){e.subUpdateYanzhi(t.row)}}},[e._v("确定")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(i){e.$refs["p-"+t.row.id].doClose()}}},[e._v("取消")])],1),e._v(" "),i("el-button",{staticStyle:{"margin-top":"5px"},attrs:{slot:"reference",type:"normal",size:"mini"},slot:"reference"},[i("span",{ref:"newValue-"+t.row.id},[e._v(e._s(t.row.identityDesc))])])],1),e._v(" "),i("div",{staticStyle:{"margin-top":"8px"},domProps:{innerHTML:e._s(t.row.vipName)}}),e._v(" "),-1==t.row.level?i("div",{staticStyle:{"margin-top":"8px","background-color":"bisque"}},[e._v("注册充值")]):e._e(),e._v(" "),-2==t.row.level?i("div",{staticStyle:{"margin-top":"8px","background-color":"#c4f5ff"}},[e._v("邀请免充")]):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"生日",prop:"birthday","min-width":"50",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"注册时间",prop:"createTime","min-width":"81",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"最后登录",prop:"updateTime","min-width":"81",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"登录位置",prop:"detailAddress","min-width":"70",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"登录ip",prop:"creatorUsername","min-width":"60",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{domProps:{innerHTML:e._s(t.row.creatorUsername)}}),e._v(" "),i("div",{domProps:{innerHTML:e._s(t.row._async_label)}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"状态",prop:"workStatus","min-width":"60",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.workStatus?i("el-button",{staticStyle:{padding:"2px 2px 2px 2px"},attrs:{size:"mini",type:"warning",disabled:""}},[e._v("正常")]):1==t.row.workStatus?i("el-button",{staticStyle:{padding:"2px 2px 2px 2px"},attrs:{size:"mini",type:"info",disabled:""}},[e._v("沉底")]):2==t.row.workStatus?i("el-button",{staticStyle:{padding:"2px 2px 2px 2px"},attrs:{size:"mini",type:"danger",disabled:""}},[e._v("封禁")]):3==t.row.workStatus?i("el-button",{staticStyle:{padding:"2px 2px 2px 2px"},attrs:{size:"mini",type:"success",disabled:""}},[e._v("推荐")]):e._e()]}}])}),e._v(" "),e.checkPermission(["ADMIN","USER_ALL","USER_EDIT","USER_DELETE"])?i("el-table-column",{attrs:{label:"操作",width:"125",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["ADMIN","USER_ALL","USER_EDIT"],expression:"['ADMIN','USER_ALL','USER_EDIT']"}],attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(i){e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),i("br"),e._v(" "),i("el-button-group",{staticStyle:{"margin-left":"23px","margin-top":"10px"}},[0!=t.row.workStatus?i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["ADMIN","USER_ALL","USER_EDIT"],expression:"['ADMIN','USER_ALL','USER_EDIT']"}],staticStyle:{"margin-bottom":"5px"},attrs:{loading:e.btnIndex==t.$index+"-btn1",size:"mini",type:"warning"},on:{click:function(i){e.subUpdateStatus(t.row.id,0,t.$index+"-btn1",t.$index)}}},[e._v("\n            正常\n          ")]):e._e(),e._v(" "),1!=t.row.workStatus?i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["ADMIN","USER_ALL","USER_EDIT"],expression:"['ADMIN','USER_ALL','USER_EDIT']"}],staticStyle:{"margin-bottom":"5px"},attrs:{loading:e.btnIndex==t.$index+"-btn2",size:"mini",type:"info"},on:{click:function(i){e.subUpdateStatus(t.row.id,1,t.$index+"-btn2",t.$index)}}},[e._v("\n            沉底\n          ")]):e._e(),e._v(" "),2!=t.row.workStatus?i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["ADMIN","USER_ALL","USER_EDIT"],expression:"['ADMIN','USER_ALL','USER_EDIT']"}],staticStyle:{"margin-bottom":"5px"},attrs:{loading:e.btnIndex==t.$index+"-btn3",size:"mini",type:"danger"},on:{click:function(i){e.subUpdateStatus(t.row.id,2,t.$index+"-btn3",t.$index)}}},[e._v("\n            封禁\n          ")]):e._e(),e._v(" "),3!=t.row.workStatus?i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["ADMIN","USER_ALL","USER_EDIT"],expression:"['ADMIN','USER_ALL','USER_EDIT']"}],attrs:{loading:e.btnIndex==t.$index+"-btn4",size:"mini",type:"success"},on:{click:function(i){e.subUpdateStatus(t.row.id,3,t.$index+"-btn4",t.$index)}}},[e._v("\n            推荐\n          ")]):e._e()],1)]}}])}):e._e()],1),e._v(" "),i("el-pagination",{staticStyle:{"margin-top":"8px"},attrs:{total:e.total,"current-page":e.page+1,layout:"total, prev, pager, next, sizes"},on:{"size-change":e.sizeChange,"current-change":e.pageChange}})],1)},[],!1,null,"12ca686c",null);c.options.__file="index.vue";t.default=c.exports}}]);