(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3625"],{"/gXl":function(n,e,t){"use strict";t.d(e,"d",function(){return o}),t.d(e,"a",function(){return l}),t.d(e,"b",function(){return a}),t.d(e,"c",function(){return i});var r=t("t3Un");function o(n){return Object(r.a)({url:"/vue/api/dept",method:"get",params:n})}function l(n){return Object(r.a)({url:"/vue/api/dept",method:"post",data:n})}function a(n){return Object(r.a)({url:"/vue/api/dept/"+n,method:"delete"})}function i(n){return Object(r.a)({url:"/vue/api/dept",method:"put",data:n})}},"24Mc":function(n,e,t){(n.exports=t("I1BE")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},QbtA:function(n,e,t){var r=t("24Mc");"string"==typeof r&&(r=[[n.i,r,""]]),r.locals&&(n.exports=r.locals);(0,t("SZ7m").default)("70fac492",r,!0,{})},dv4G:function(n,e,t){"use strict";t.d(e,"d",function(){return o}),t.d(e,"a",function(){return l}),t.d(e,"b",function(){return a}),t.d(e,"c",function(){return i});var r=t("t3Un");function o(n){var e={deptId:n,page:0,size:9999};return Object(r.a)({url:"/vue/api/job",method:"get",params:e})}function l(n){return Object(r.a)({url:"/vue/api/job",method:"post",data:n})}function a(n){return Object(r.a)({url:"/vue/api/job/"+n,method:"delete"})}function i(n){return Object(r.a)({url:"/vue/api/job",method:"put",data:n})}},"wk8/":function(n,e,t){"use strict";t.d(e,"a",function(){return o}),t.d(e,"b",function(){return l}),t.d(e,"c",function(){return a}),t.d(e,"e",function(){return i}),t.d(e,"d",function(){return s});var r=t("t3Un");function o(n){return Object(r.a)({url:"/vue/api/users",method:"post",data:n})}function l(n){return Object(r.a)({url:"/vue/api/users/"+n,method:"delete"})}function a(n){return Object(r.a)({url:"/vue/api/users",method:"put",data:n})}function i(n){var e={oldPass:n.oldPass,newPass:n.newPass};return Object(r.a)({url:"/vue/api/users/updatePass/",method:"post",data:e})}function s(n,e){return Object(r.a)({url:"/vue/api/users/updateEmail/"+n,method:"post",data:e})}},xtAv:function(n,e,t){"use strict";var r=t("QbtA");t.n(r).a},zF5t:function(n,e,t){"use strict";t.d(e,"g",function(){return o}),t.d(e,"a",function(){return l}),t.d(e,"f",function(){return a}),t.d(e,"h",function(){return i}),t.d(e,"b",function(){return s}),t.d(e,"c",function(){return u}),t.d(e,"e",function(){return d}),t.d(e,"d",function(){return c});var r=t("t3Un");function o(){return Object(r.a)({url:"/vue/api/roles/all",method:"get"})}function l(n){return Object(r.a)({url:"/vue/api/roles",method:"post",data:n})}function a(n){return Object(r.a)({url:"/vue/api/roles/"+n,method:"get"})}function i(){return Object(r.a)({url:"/vue/api/roles/level",method:"get"})}function s(n){return Object(r.a)({url:"/vue/api/roles/"+n,method:"delete"})}function u(n){return Object(r.a)({url:"/vue/api/roles",method:"put",data:n})}function d(n){return Object(r.a)({url:"/vue/api/roles/permission",method:"put",data:n})}function c(n){return Object(r.a)({url:"/vue/api/roles/menu",method:"put",data:n})}},"zL/z":function(n,e,t){"use strict";t.r(e);var r=t("wk8/"),o=t("/gXl"),l=t("zF5t"),a=t("dv4G"),i=t("cCY5"),s=t.n(i),u=(t("VCwm"),{components:{Treeselect:s.a},props:{isAdd:{type:Boolean,required:!0},dicts:{type:Array,required:!0}},data:function(){var n=this;return{dialog:!1,loading:!1,form:{username:"",email:"",enabled:"false",roles:[],job:{id:""},dept:{id:""},phone:null},roleIds:[],roles:[],depts:[],deptId:null,jobId:null,jobs:[],style:"width: 184px",level:3,rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],phone:[{required:!0,trigger:"blur",validator:function(e,t,r){t?n.isvalidPhone(t)?r():r(new Error("请输入正确的11位手机号码")):r(new Error("请输入电话号码"))}}],enabled:[{required:!0,message:"状态不能为空",trigger:"blur"}]}}},created:function(){navigator.userAgent.indexOf("Chrome")>=0?this.style="width: 184px":this.style="width: 172px"},methods:{cancel:function(){this.resetForm()},doSubmit:function(){var n=this;this.form.dept.id=this.deptId,this.form.job.id=this.jobId,this.$refs.form.validate(function(e){if(!e)return!1;if(null===n.deptId||void 0===n.deptId)n.$message({message:"部门不能为空",type:"warning"});else if(null===n.jobId)n.$message({message:"岗位不能为空",type:"warning"});else if(0===n.roleIds.length)n.$message({message:"角色不能为空",type:"warning"});else{n.loading=!0,n.form.roles=[];var t=n;n.roleIds.forEach(function(n,e){var r={id:n};t.form.roles.push(r)}),n.isAdd?n.doAdd():n.doEdit()}})},doAdd:function(){var n=this;Object(r.a)(this.form).then(function(e){n.resetForm(),n.$notify({title:"添加成功",message:"默认密码：111111",type:"success",duration:2500}),n.loading=!1,n.$parent.init()}).catch(function(e){n.loading=!1,console.log(e.response.data.message)})},doEdit:function(){var n=this;Object(r.c)(this.form).then(function(e){n.resetForm(),n.$notify({title:"修改成功",type:"success",duration:2500}),n.loading=!1,n.$parent.init()}).catch(function(e){n.loading=!1,console.log(e.response.data.message)})},resetForm:function(){this.dialog=!1,this.$refs.form.resetFields(),this.deptId=null,this.jobId=null,this.roleIds=[],this.form={username:"",email:"",enabled:"false",roles:[],job:{id:""},dept:{id:""},phone:null}},getRoles:function(){var n=this;Object(l.g)().then(function(e){n.roles=e}).catch(function(n){console.log(n.response.data.message)})},getJobs:function(n){var e=this;Object(a.d)(n).then(function(n){e.jobs=n.content,n.content.length>0?e.jobId=n.content[0].id:e.jobId=null}).catch(function(n){console.log(n.response.data.message)})},getDepts:function(){var n=this;Object(o.d)({enabled:!0}).then(function(e){n.depts=e.content})},isvalidPhone:function(n){return/^1[3|4|5|7|8][0-9]\d{8}$/.test(n)},selectFun:function(n,e){this.getJobs(n.id)},getRoleLevel:function(){var n=this;Object(l.h)().then(function(e){n.level=e.level}).catch(function(n){console.log(n.response.data.message)})}}}),d=(t("xtAv"),t("KHd+")),c=Object(d.a)(u,function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("el-dialog",{attrs:{visible:n.dialog,title:n.isAdd?"新增用户":"编辑用户","append-to-body":"",width:"570px"},on:{"update:visible":function(e){n.dialog=e}}},[t("el-form",{ref:"form",attrs:{inline:!0,model:n.form,rules:n.rules,size:"small","label-width":"66px"}},[t("el-form-item",{attrs:{label:"用户名",prop:"username"}},[t("el-input",{model:{value:n.form.username,callback:function(e){n.$set(n.form,"username",e)},expression:"form.username"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"状态",prop:"enabled"}},n._l(n.dicts,function(e){return t("el-radio",{key:e.id,attrs:{label:e.value},model:{value:n.form.enabled,callback:function(e){n.$set(n.form,"enabled",e)},expression:"form.enabled"}},[n._v(n._s(e.label))])})),n._v(" "),t("el-form-item",{attrs:{label:"电话",prop:"phone"}},[t("el-input",{model:{value:n.form.phone,callback:function(e){n.$set(n.form,"phone",n._n(e))},expression:"form.phone"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{model:{value:n.form.email,callback:function(e){n.$set(n.form,"email",e)},expression:"form.email"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"部门"}},[t("treeselect",{style:n.style,attrs:{options:n.depts,placeholder:"选择部门"},on:{select:n.selectFun},model:{value:n.deptId,callback:function(e){n.deptId=e},expression:"deptId"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"岗位"}},[t("el-select",{style:n.style,attrs:{placeholder:null==n.jobId?"无数据":"请先选择部门"},model:{value:n.jobId,callback:function(e){n.jobId=e},expression:"jobId"}},n._l(n.jobs,function(n,e){return t("el-option",{key:n.name+e,attrs:{label:n.name,value:n.id}})}))],1),n._v(" "),t("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"角色"}},[t("el-select",{staticStyle:{width:"450px"},attrs:{multiple:"",placeholder:"请选择"},model:{value:n.roleIds,callback:function(e){n.roleIds=e},expression:"roleIds"}},n._l(n.roles,function(e,r){return t("el-option",{key:e.name+r,attrs:{disabled:1!==n.level&&e.level<=n.level,label:e.name,value:e.id}})}))],1)],1),n._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"text"},on:{click:n.cancel}},[n._v("取消")]),n._v(" "),t("el-button",{attrs:{loading:n.loading,type:"primary"},on:{click:n.doSubmit}},[n._v("确认")])],1)],1)},[],!1,null,"cb531070",null);c.options.__file="form.vue";e.default=c.exports}}]);